<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FOGWALKER</title>
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- 配置Tailwind自定义颜色和字体 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        accent: '#00c8ff',
                        dark: '#050505',
                        light: '#ffffff',
                        red: '#ff0000'
                    },
                    fontFamily: {
                        rounded: ['"Fredoka One"', 'cursive'],
                        sans: ['Nunito', 'sans-serif'],
                        mono: ['Nunito', 'monospace']
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.6s ease-out forwards',
                        'pulse-soft': 'pulseSoft 4s infinite',
                        'border-pulse': 'borderPulse 2s infinite'
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { transform: 'translateY(10px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        },
                        pulseSoft: {
                            '0%, 100%': { opacity: '1' },
                            '50%': { opacity: '0.6' }
                        },
                        borderPulse: {
                            '0%, 100%': { border- color: 'rgba(0, 200, 255, 0.5)' },
                        '50%': { border- color: 'rgba(0, 200, 255, 0.9)' }
                }
            }
        }
            }
        }
    </script>

    <!-- 自定义工具类 -->
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 0 0 15px rgba(0, 200, 255, 0.3);
            }
        }
    </style>

    <style>
        /* 导入圆润字体 */
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;700&display=swap');

        /* 基础样式 */
        body {
            overflow: hidden;
            background-color: #050505;
        }

        /* 打字容器样式 */
        .typing-container {
            position: relative;
            display: inline-block;
        }

        /* 文字雾化效果 */
        #typed-text {
            opacity: 0.5;
            text-shadow:
                0 0 15px rgba(255, 255, 255, 0.3),
                0 0 30px rgba(200, 200, 220, 0.2),
                0 0 45px rgba(180, 180, 200, 0.15);
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.2));
            position: relative;
            animation: textContainerGlow 8s ease-in-out infinite;
            letter-spacing: 0.02em; /* 适度的字母间距 */
        }

        /* 整体文字容器发光效果 */
        @keyframes textContainerGlow {
            0%, 85%, 100% {
                filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.2));
            }
            3%, 7%, 12% {
                filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.8))
                        drop-shadow(0 0 30px rgba(255, 255, 255, 0.4))
                        drop-shadow(0 0 40px rgba(0, 200, 255, 0.3));
            }
        }

        /* 红色文字特殊雾化效果 */
        .text-red {
            color: rgba(255, 0, 0, 0.6) !important;
            text-shadow:
                0 0 12px rgba(255, 0, 0, 0.3),
                0 0 25px rgba(255, 100, 100, 0.2),
                0 0 35px rgba(255, 150, 150, 0.15) !important;
        }

        /* 文字闪电特效 */
        .text-lightning-effect {
            position: relative;
            display: inline-block;
        }

        .text-lightning-effect::before {
            content: '';
            position: absolute;
            top: -20%;
            left: -10%;
            width: 120%;
            height: 140%;
            background: linear-gradient(45deg, 
                transparent 0%, 
                transparent 45%, 
                rgba(255, 255, 255, 0.8) 50%, 
                transparent 55%, 
                transparent 100%);
            opacity: 0;
            transform: translateX(-100%) skewX(-20deg);
            animation: textLightningFlash 4s ease-in-out infinite;
            pointer-events: none;
            z-index: 1;
        }

        .text-lightning-effect::after {
            content: '';
            position: absolute;
            top: -10%;
            left: -5%;
            width: 110%;
            height: 120%;
            background: linear-gradient(135deg, 
                transparent 0%, 
                transparent 40%, 
                rgba(255, 255, 255, 0.6) 50%, 
                transparent 60%, 
                transparent 100%);
            opacity: 0;
            transform: translateX(100%) skewX(20deg);
            animation: textLightningFlash 4s ease-in-out infinite;
            animation-delay: 2s;
            pointer-events: none;
            z-index: 1;
        }

        /* 闪电划过动画 */
        @keyframes textLightningFlash {
            0% {
                opacity: 0;
                transform: translateX(-100%) skewX(-20deg);
            }
            1% {
                opacity: 1;
                transform: translateX(-80%) skewX(-20deg);
            }
            2% {
                opacity: 0.9;
                transform: translateX(-60%) skewX(-20deg);
            }
            3% {
                opacity: 0.8;
                transform: translateX(-40%) skewX(-20deg);
            }
            4% {
                opacity: 0.7;
                transform: translateX(-20%) skewX(-20deg);
            }
            5% {
                opacity: 0.6;
                transform: translateX(0%) skewX(-20deg);
            }
            6% {
                opacity: 0.5;
                transform: translateX(20%) skewX(-20deg);
            }
            7% {
                opacity: 0.3;
                transform: translateX(40%) skewX(-20deg);
            }
            8% {
                opacity: 0.1;
                transform: translateX(60%) skewX(-20deg);
            }
            9% {
                opacity: 0;
                transform: translateX(80%) skewX(-20deg);
            }
            10% {
                opacity: 0;
                transform: translateX(100%) skewX(-20deg);
            }
            100% {
                opacity: 0;
                transform: translateX(100%) skewX(-20deg);
            }
        }

        /* 文字电击效果 */
        .text-electric {
            animation: electricPulse 6s ease-in-out infinite;
        }

        @keyframes electricPulse {
            0%, 90%, 100% {
                text-shadow:
                    0 0 15px rgba(255, 255, 255, 0.3),
                    0 0 30px rgba(200, 200, 220, 0.2),
                    0 0 45px rgba(180, 180, 200, 0.15);
            }
            2%, 6%, 10% {
                text-shadow:
                    0 0 25px rgba(255, 255, 255, 0.9),
                    0 0 40px rgba(255, 255, 255, 0.6),
                    0 0 55px rgba(255, 255, 255, 0.4),
                    0 0 70px rgba(0, 200, 255, 0.3);
            }
        }

        /* 红色文字电击效果 */
        .text-red.text-electric {
            animation: redElectricPulse 6s ease-in-out infinite;
        }

        @keyframes redElectricPulse {
            0%, 90%, 100% {
                text-shadow:
                    0 0 12px rgba(255, 0, 0, 0.3),
                    0 0 25px rgba(255, 100, 100, 0.2),
                    0 0 35px rgba(255, 150, 150, 0.15);
            }
            2%, 6%, 10% {
                text-shadow:
                    0 0 20px rgba(255, 0, 0, 0.9),
                    0 0 35px rgba(255, 0, 0, 0.7),
                    0 0 50px rgba(255, 100, 100, 0.5),
                    0 0 65px rgba(255, 255, 255, 0.3);
            }
        }

        /* 优化后的雾气背景 - 使用CSS变量和transform3d优化性能 */
        .fog-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            will-change: transform;
        }

        /* 主雾气层 - 简化版本 */
        .fog-layer-1 {
            position: absolute;
            top: -20%;
            left: -20%;
            width: 140%;
            height: 140%;
            background:
                radial-gradient(circle at 30% 40%, rgba(200, 200, 220, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 70% 60%, rgba(180, 180, 200, 0.06) 0%, transparent 45%);
            filter: blur(8px);
            animation: fogDrift1 60s ease-in-out infinite;
            will-change: transform;
        }

        .fog-layer-2 {
            position: absolute;
            top: -30%;
            left: -30%;
            width: 160%;
            height: 160%;
            background:
                radial-gradient(circle at 20% 70%, rgba(190, 190, 210, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 30%, rgba(170, 170, 190, 0.04) 0%, transparent 55%);
            filter: blur(12px);
            animation: fogDrift2 80s ease-in-out infinite;
            will-change: transform;
        }

        /* 优化的动画 - 使用transform3d */
        @keyframes fogDrift1 {
            0% {
                transform: translate3d(-2%, -1%, 0) rotate(0deg);
            }

            25% {
                transform: translate3d(1%, -3%, 0) rotate(0.2deg);
            }

            50% {
                transform: translate3d(3%, 1%, 0) rotate(-0.1deg);
            }

            75% {
                transform: translate3d(-1%, 2%, 0) rotate(0.3deg);
            }

            100% {
                transform: translate3d(-2%, -1%, 0) rotate(0deg);
            }
        }

        @keyframes fogDrift2 {
            0% {
                transform: translate3d(0%, 0%, 0) rotate(0deg);
            }

            33% {
                transform: translate3d(-2%, 1%, 0) rotate(0.1deg);
            }

            66% {
                transform: translate3d(-4%, -1%, 0) rotate(-0.2deg);
            }

            100% {
                transform: translate3d(-6%, 0%, 0) rotate(0deg);
            }
        }

        /* 闪电效果 */
        .lightning-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 4;
            overflow: hidden;
        }

        .lightning-bolt {
            position: absolute;
            width: 300px;
            height: 400px;
            opacity: 0;
            will-change: transform, opacity;
        }

        .lightning-svg {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 0 6px rgba(255, 255, 255, 0.8)) 
                    drop-shadow(0 0 12px rgba(255, 255, 255, 0.5))
                    drop-shadow(0 0 18px rgba(255, 255, 255, 0.3));
        }

        .lightning-path {
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .lightning-main {
            stroke: rgba(255, 255, 255, 0.95);
            stroke-width: 2;
        }

        .lightning-glow {
            stroke: rgba(255, 255, 255, 0.6);
            stroke-width: 4;
            opacity: 0.5;
        }

        .lightning-outer {
            stroke: rgba(255, 255, 255, 0.3);
            stroke-width: 6;
            opacity: 0.3;
        }

        /* 闪电快速闪烁动画 */
        @keyframes lightningStrike {
            0% { opacity: 0; }
            2% { opacity: 1; }
            4% { opacity: 0.1; }
            6% { opacity: 0.9; }
            8% { opacity: 0.2; }
            10% { opacity: 1; }
            12% { opacity: 0.3; }
            14% { opacity: 0.8; }
            16% { opacity: 0.1; }
            18% { opacity: 0.7; }
            20% { opacity: 0; }
            100% { opacity: 0; }
        }

        /* 短闪电动画 */
        @keyframes quickFlash {
            0% { opacity: 0; }
            5% { opacity: 1; }
            10% { opacity: 0.2; }
            15% { opacity: 0.9; }
            20% { opacity: 0; }
            100% { opacity: 0; }
        }

        /* 微闪动画 */
        @keyframes microFlash {
            0% { opacity: 0; }
            10% { opacity: 0.8; }
            20% { opacity: 0.1; }
            30% { opacity: 0.6; }
            40% { opacity: 0; }
            100% { opacity: 0; }
        }

        /* 大闪电样式 */
        .lightning-mega {
            position: absolute;
            width: 300px;
            height: 100vh;
            opacity: 0;
            will-change: transform, opacity;
            z-index: 5;
        }

        .lightning-mega .lightning-svg {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.9)) 
                    drop-shadow(0 0 15px rgba(255, 255, 255, 0.6))
                    drop-shadow(0 0 25px rgba(255, 255, 255, 0.3));
        }

        .lightning-mega .lightning-main {
            stroke: rgba(255, 255, 255, 1);
            stroke-width: 2;
        }

        .lightning-mega .lightning-glow {
            stroke: rgba(255, 255, 255, 0.6);
            stroke-width: 4;
            opacity: 0.5;
        }

        .lightning-mega .lightning-outer {
            stroke: rgba(255, 255, 255, 0.3);
            stroke-width: 6;
            opacity: 0.3;
        }

        /* 大闪电动画 */
        @keyframes megaLightningStrike {
            0% { opacity: 0; }
            1% { opacity: 1; }
            2% { opacity: 0.1; }
            3% { opacity: 1; }
            4% { opacity: 0.2; }
            5% { opacity: 1; }
            6% { opacity: 0.1; }
            7% { opacity: 0.9; }
            8% { opacity: 0.3; }
            9% { opacity: 1; }
            10% { opacity: 0.1; }
            11% { opacity: 0.8; }
            12% { opacity: 0.2; }
            13% { opacity: 1; }
            14% { opacity: 0.4; }
            15% { opacity: 0.9; }
            16% { opacity: 0.1; }
            17% { opacity: 0.7; }
            18% { opacity: 0.3; }
            19% { opacity: 1; }
            20% { opacity: 0; }
            100% { opacity: 0; }
        }

        /* 边缘渐变遮罩 */
        .fog-vignette {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 20%, rgba(5, 5, 5, 0.3) 80%);
            pointer-events: none;
            z-index: 3;
        }

        /* 移动端适配 */
        @media (max-width: 640px) {

            .fixed.top-4.left-4,
            .fixed.bottom-4.right-4 {
                width: 12px;
                height: 12px;
            }

            /* 移动端减少动画复杂度 */
            .fog-layer-1,
            .fog-layer-2 {
                filter: blur(6px);
            }

            /* 移动端闪电线条 */
            .lightning-main {
                stroke-width: 1.5;
            }

            .lightning-glow {
                stroke: rgba(255, 255, 255, 0.5);
                stroke-width: 3;
                opacity: 0.4;
            }

            .lightning-outer {
                stroke: rgba(255, 255, 255, 0.2);
                stroke-width: 4;
                opacity: 0.2;
            }

            .lightning-mega .lightning-main {
                stroke-width: 1.5;
            }

            .lightning-mega .lightning-glow {
                stroke: rgba(255, 255, 255, 0.5);
                stroke-width: 3;
                opacity: 0.4;
            }

            .lightning-mega .lightning-outer {
                stroke: rgba(255, 255, 255, 0.2);
                stroke-width: 4;
                opacity: 0.2;
            }

            /* 移动端光晕效果更细腻 */
            .lightning-svg {
                filter: drop-shadow(0 0 3px rgba(255, 255, 255, 0.7)) 
                        drop-shadow(0 0 6px rgba(255, 255, 255, 0.4))
                        drop-shadow(0 0 9px rgba(255, 255, 255, 0.2));
            }

            .lightning-mega .lightning-svg {
                filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.8)) 
                        drop-shadow(0 0 8px rgba(255, 255, 255, 0.5))
                        drop-shadow(0 0 12px rgba(255, 255, 255, 0.2));
            }
        }

        /* 减少动画在低性能设备上的影响 */
        @media (prefers-reduced-motion: reduce) {

            .fog-layer-1,
            .fog-layer-2,
            .lightning-bolt {
                animation-duration: 120s;
            }
        }

        /* 音乐提示动画 */
        @keyframes fadeInOut {
            0% {
                opacity: 0;
                transform: translateY(-10px);
            }

            20% {
                opacity: 1;
                transform: translateY(0);
            }

            80% {
                opacity: 1;
                transform: translateY(0);
            }

            100% {
                opacity: 0;
                transform: translateY(-10px);
            }
        }

        /* 提示框红色光晕效果 */
        @keyframes redGlow {

            0%,
            100% {
                box-shadow: 0 -8px 32px rgba(255, 0, 0, 0.1), 0 0 20px rgba(255, 0, 0, 0.05);
            }

            50% {
                box-shadow: 0 -8px 32px rgba(255, 0, 0, 0.2), 0 0 30px rgba(255, 0, 0, 0.1);
            }
        }

        /* 提示框边框脉冲效果 */
        @keyframes borderPulse {

            0%,
            100% {
                border-top-color: rgba(255, 0, 0, 0.4);
            }

            50% {
                border-top-color: rgba(255, 0, 0, 0.7);
            }
        }
    </style>
</head>

<body class="font-sans text-light min-h-screen flex items-center justify-center relative p-4">
    <!-- 优化后的雾气背景 -->
    <div class="fog-background">
        <div class="fog-layer-1"></div>
        <div class="fog-layer-2"></div>
    </div>

    <!-- 边缘渐变 -->
    <div class="fog-vignette"></div>

    <!-- 闪电效果 -->
    <div class="lightning-container" id="lightning-container"></div>

    <!-- 角落装饰元素 -->
    <div class="fixed top-4 left-4 w-12 md:w-16 h-12 md:h-16 border-t-2 border-l-2 border-accent/30"></div>
    <div class="fixed bottom-4 right-4 w-12 md:w-16 h-12 md:h-16 border-b-2 border-r-2 border-accent/30"></div>

    <!-- 隐藏的背景音乐 -->
    <audio id="background-music" loop preload="auto" style="display: none;">
        <source src="https://cdn.pixabay.com/audio/2025/03/19/audio_56ae1dae5f.mp3" type="audio/mpeg">
        <!-- 备用音乐链接 -->
        <source
            src="https://files.freemusicarchive.org/storage-freemusicarchive-org/music/Creative_Commons/Chad_Crouch/Arps/Chad_Crouch_-_Shipping_Lanes.mp3"
            type="audio/mpeg">
    </audio>

    <!-- 音乐控制按钮 -->
    <div id="music-control" style="
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        width: 40px;
        height: 40px;
        background: rgba(160, 160, 160, 0.15);
        border: 1px solid rgba(180, 180, 180, 0.3);
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    " title="点击控制音乐">
        <i id="music-icon" class="fa fa-volume-up" style="color: #b0b0b0; font-size: 16px;"></i>
    </div>

    <!-- 主内容 -->
    <div class="relative z-10 text-center max-w-full mx-auto">
        <!-- 标题区域 -->
        <div class="mb-6 overflow-visible">
            <div class="typing-container">
                <div id="typed-text"
                    class="text-[clamp(2rem,8vw,7rem)] font-rounded font-bold text-white text-shadow leading-none inline-block">
                </div>
            </div>
        </div>

        <!-- 简短描述 -->
        <p class="text-gray-400 uppercase tracking-widest text-xs sm:text-sm mb-8 md:mb-12 opacity-0 animate-fade-in-up"
            style="animation-delay: 2.8s;">
            EXPLORING DIGITAL FRONTIERS
        </p>

        <!-- 互动按钮 -->
        <div class="opacity-0 animate-fade-in-up" style="animation-delay: 3.2s;">
            <button id="enter-button"
                class="group relative px-6 py-3 sm:px-8 sm:py-3 border border-accent/50 text-accent uppercase tracking-wider text-sm hover:bg-accent hover:text-dark transition-all duration-300 overflow-hidden">
                <span class="relative z-10 flex items-center justify-center">
                    ENTER
                    <i class="fa fa-chevron-right ml-2 group-hover:ml-3 transition-all"></i>
                </span>
                <span
                    class="absolute inset-0 w-0 h-full bg-accent/10 group-hover:w-full transition-all duration-300"></span>
            </button>
        </div>
    </div>

    <script>
        // 频繁不规则闪电效果
        function createLightningEffect() {
            const lightningContainer = document.getElementById('lightning-container');
            let activeCount = 0; // 跟踪活跃的闪电数量
            const maxActive = 3; // 最大同时活跃闪电数
            
            // 生成从顶部劈下来的大闪电路径
            function generateMegaLightningPath() {
                const points = [];
                
                // 从顶部开始
                const startX = 40 + Math.random() * 70; // 40-110
                const startY = 0; // 从最顶部开始
                
                points.push([startX, startY]);
                
                let currentX = startX;
                let currentY = startY;
                
                // 更多段数，从顶到底
                const segments = 12 + Math.floor(Math.random() * 8); // 12-19个段
                const totalHeight = 100; // 全屏高度
                
                for (let i = 1; i < segments; i++) {
                    const progress = i / segments;
                    const targetY = totalHeight * progress;
                    
                    // 大幅度的锯齿变化
                    const xChange = (Math.random() - 0.5) * 80; // 更大的横向变化
                    currentX = Math.max(10, Math.min(140, currentX + xChange));
                    currentY = targetY;
                    
                    points.push([currentX, currentY]);
                }
                
                // 添加多个分支
                const branchCount = 2 + Math.floor(Math.random() * 3); // 2-4个分支
                for (let b = 0; b < branchCount; b++) {
                    const branchPoint = Math.floor(segments * 0.2) + Math.floor(Math.random() * Math.floor(segments * 0.6));
                    if (branchPoint < points.length) {
                        const branchX = points[branchPoint][0] + (Math.random() - 0.5) * 60;
                        const branchY = points[branchPoint][1] + 5 + Math.random() * 15;
                        points.splice(branchPoint + 1, 0, [branchX, branchY]);
                    }
                }
                
                // 生成SVG路径字符串
                let pathString = `M ${points[0][0]} ${points[0][1]}`;
                for (let i = 1; i < points.length; i++) {
                    pathString += ` L ${points[i][0]} ${points[i][1]}`;
                }
                
                return pathString;
            }

            // 生成不规则闪电路径 - 更长的路径
            function generateRandomLightningPath() {
                const points = [];
                
                // 随机起始位置 (不一定从顶部)
                const startX = 15 + Math.random() * 90; // 15-105 (更宽范围)
                const startY = Math.random() * 25; // 0-25 (稍微降低起始点)
                
                points.push([startX, startY]);
                
                let currentX = startX;
                let currentY = startY;
                
                // 增加段数，让闪电更长 - 再增加50%
                const segments = 10 + Math.floor(Math.random() * 10); // 10-19个段 (更多段)
                const pathLength = 120 + Math.random() * 150; // 路径长度 120-270 (增加50%)
                
                for (let i = 1; i < segments; i++) {
                    const progress = i / segments;
                    
                    // 不规则的方向变化 - 增加变化幅度
                    const xChange = (Math.random() - 0.5) * 70; // 更大横向变化
                    const yChange = (pathLength / segments) * (0.6 + Math.random() * 0.8); // 更大纵向变化
                    
                    currentX = Math.max(5, Math.min(145, currentX + xChange));
                    currentY = Math.min(140, currentY + yChange); // 增加Y范围
                    
                    points.push([currentX, currentY]);
                }
                
                // 添加更多随机的分支点
                if (Math.random() < 0.7) { // 70%概率添加分支 (增加)
                    const branchPoint = Math.floor(segments * 0.2) + Math.floor(Math.random() * Math.floor(segments * 0.6));
                    const branchX = points[branchPoint][0] + (Math.random() - 0.5) * 50; // 更大分支变化
                    const branchY = points[branchPoint][1] + 8 + Math.random() * 25; // 更大分支长度
                    
                    // 在分支点后插入分支
                    points.splice(branchPoint + 1, 0, [branchX, branchY]);
                }

                // 添加第二个分支的可能性
                if (Math.random() < 0.4) { // 40%概率添加第二个分支
                    const branchPoint = Math.floor(segments * 0.5) + Math.floor(Math.random() * Math.floor(segments * 0.3));
                    if (branchPoint < points.length) {
                        const branchX = points[branchPoint][0] + (Math.random() - 0.5) * 45;
                        const branchY = points[branchPoint][1] + 6 + Math.random() * 20;
                        points.splice(branchPoint + 1, 0, [branchX, branchY]);
                    }
                }
                
                // 生成SVG路径字符串
                let pathString = `M ${points[0][0]} ${points[0][1]}`;
                for (let i = 1; i < points.length; i++) {
                    pathString += ` L ${points[i][0]} ${points[i][1]}`;
                }
                
                return pathString;
            }
            
            // 创建大闪电 - 从顶部劈下来
            function createMegaLightning() {
                const lightningBolt = document.createElement('div');
                lightningBolt.className = 'lightning-mega';
                
                // 随机水平位置，但更居中
                const leftPosition = Math.random() * 60 + 20; // 20% - 80%
                lightningBolt.style.left = leftPosition + '%';
                lightningBolt.style.top = '0';
                
                // 创建SVG
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svg.setAttribute('class', 'lightning-svg');
                svg.setAttribute('viewBox', '0 0 150 100');
                svg.setAttribute('preserveAspectRatio', 'none');
                
                // 生成大闪电路径
                const pathData = generateMegaLightningPath();
                
                // 创建三层效果
                const outerPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                outerPath.setAttribute('d', pathData);
                outerPath.setAttribute('class', 'lightning-path lightning-outer');
                
                const glowPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                glowPath.setAttribute('d', pathData);
                glowPath.setAttribute('class', 'lightning-path lightning-glow');
                
                const mainPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                mainPath.setAttribute('d', pathData);
                mainPath.setAttribute('class', 'lightning-path lightning-main');
                
                svg.appendChild(outerPath);
                svg.appendChild(glowPath);
                svg.appendChild(mainPath);
                lightningBolt.appendChild(svg);
                
                // 设置大闪电动画
                lightningBolt.style.animation = 'megaLightningStrike 4s ease-in-out';
                
                lightningContainer.appendChild(lightningBolt);
                
                // 4秒后清理
                setTimeout(() => {
                    if (lightningBolt.parentNode) {
                        lightningBolt.parentNode.removeChild(lightningBolt);
                    }
                }, 4000);
            }

            // 创建单个闪电
            function createLightningStrike(animationType = 'lightningStrike') {
                if (activeCount >= maxActive) return; // 防止过多闪电
                
                activeCount++;
                
                const lightningBolt = document.createElement('div');
                lightningBolt.className = 'lightning-bolt';
                
                // 随机位置和大小
                const leftPosition = Math.random() * 65 + 5; // 5% - 70%
                const topPosition = Math.random() * 50 + 5; // 5% - 55%
                const scale = 0.5 + Math.random() * 0.7; // 0.5-1.2倍大小
                
                lightningBolt.style.left = leftPosition + '%';
                lightningBolt.style.top = topPosition + '%';
                lightningBolt.style.transform = `scale(${scale}) rotate(${(Math.random() - 0.5) * 30}deg)`;
                
                // 创建SVG
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svg.setAttribute('class', 'lightning-svg');
                svg.setAttribute('viewBox', '0 0 150 120');
                
                // 生成随机闪电路径
                const pathData = generateRandomLightningPath();
                
                // 创建三层效果
                const outerPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                outerPath.setAttribute('d', pathData);
                outerPath.setAttribute('class', 'lightning-path lightning-outer');
                
                const glowPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                glowPath.setAttribute('d', pathData);
                glowPath.setAttribute('class', 'lightning-path lightning-glow');
                
                const mainPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                mainPath.setAttribute('d', pathData);
                mainPath.setAttribute('class', 'lightning-path lightning-main');
                
                svg.appendChild(outerPath);
                svg.appendChild(glowPath);
                svg.appendChild(mainPath);
                lightningBolt.appendChild(svg);
                
                // 随机选择动画类型
                const animations = ['lightningStrike', 'quickFlash', 'microFlash'];
                const selectedAnimation = animations[Math.floor(Math.random() * animations.length)];
                const duration = selectedAnimation === 'microFlash' ? 0.8 : 
                               selectedAnimation === 'quickFlash' ? 1.2 : 2;
                
                lightningBolt.style.animation = `${selectedAnimation} ${duration}s ease-in-out`;
                
                lightningContainer.appendChild(lightningBolt);
                
                // 动画结束后清理
                setTimeout(() => {
                    if (lightningBolt.parentNode) {
                        lightningBolt.parentNode.removeChild(lightningBolt);
                    }
                    activeCount--;
                }, duration * 1000);
            }
            
            // 创建闪电群 - 短时间内多个闪电
            function createLightningCluster() {
                const clusterSize = 2 + Math.floor(Math.random() * 3); // 2-4个闪电
                for (let i = 0; i < clusterSize; i++) {
                    setTimeout(() => {
                        createLightningStrike();
                    }, i * (100 + Math.random() * 200)); // 100-300ms间隔
                }
            }
            
            // 初始延迟后开始
            setTimeout(() => {
                createLightningStrike();
            }, 1000);
            
            // 主要闪电生成器 - 更频繁
            setInterval(() => {
                const rand = Math.random();
                if (rand < 0.4) { // 40%概率单个闪电
                    createLightningStrike();
                } else if (rand < 0.6) { // 20%概率闪电群
                    createLightningCluster();
                } else if (rand < 0.68) { // 8%概率大闪电 (新增)
                    createMegaLightning();
                }
            }, 1500); // 每1.5秒检查一次
            
            // 额外的随机闪电 - 增加频率
            setInterval(() => {
                if (Math.random() < 0.3) { // 30%概率
                    createLightningStrike('microFlash');
                }
            }, 800); // 每0.8秒检查一次

            // 大闪电生成器 - 震撼的天霹雳效果
            setInterval(() => {
                if (Math.random() < 0.35) { // 35%概率生成大闪电 (增加)
                    createMegaLightning();
                }
            }, 5000); // 每5秒检查一次 (更频繁)

            // 额外的大闪电生成器
            setInterval(() => {
                if (Math.random() < 0.25) { // 25%概率
                    createMegaLightning();
                }
            }, 7000); // 每7秒检查一次

            // 偶尔的超级闪电 - 连续闪电效果
            setInterval(() => {
                if (Math.random() < 0.15) { // 15%概率 (增加)
                    createMegaLightning();
                    // 连续两个大闪电，增强效果
                    setTimeout(() => {
                        if (Math.random() < 0.7) { // 70%概率第二个 (增加)
                            createMegaLightning();
                        }
                    }, 200 + Math.random() * 400);
                }
            }, 10000); // 每10秒检查一次 (更频繁)
        }

        // 优化的打字效果 - 使用requestAnimationFrame
        document.addEventListener('DOMContentLoaded', function () {
            // 创建闪电效果
            createLightningEffect();

            const englishSegments = [
                "I'M ",
                { content: "FOG", color: "text-red" },
                "WALKER"
            ];

            const chineseSegments = [
                "我是",
                { content: "雾", color: "text-red" },
                "行者"
            ];

            const typedElement = document.getElementById('typed-text');
            let segmentIndex = 0;
            let charIndex = 0;
            let isEnglishPhase = true;
            const displayDuration = 2500;
            let animationId;

            // 使用更稳定的打字速度
            function getTypingDelay() {
                return 100; // 固定延迟，避免随机性导致的不稳定
            }

            function typeCharacter() {
                const currentSegments = isEnglishPhase ? englishSegments : chineseSegments;

                if (segmentIndex < currentSegments.length) {
                    const currentSegment = currentSegments[segmentIndex];

                    if (typeof currentSegment === 'string') {
                        if (charIndex < currentSegment.length) {
                            const char = currentSegment.charAt(charIndex);
                            const span = document.createElement('span');
                            span.className = 'text-lightning-effect text-electric';
                            span.textContent = char;
                            
                            // 为空格添加特殊样式
                            if (char === ' ') {
                                span.style.minWidth = '0.3em'; // 减少空格宽度
                                span.style.display = 'inline-block';
                            }
                            
                            span.style.opacity = '0';
                            span.style.transform = 'translateY(3px)';
                            span.style.transition = 'all 0.15s ease-out';
                            typedElement.appendChild(span);

                            // 使用requestAnimationFrame优化动画
                            requestAnimationFrame(() => {
                                span.style.opacity = '1';
                                span.style.transform = 'translateY(0)';
                            });

                            charIndex++;
                            setTimeout(typeCharacter, getTypingDelay());
                        } else {
                            segmentIndex++;
                            charIndex = 0;
                            setTimeout(typeCharacter, getTypingDelay() + 30);
                        }
                    } else {
                        if (charIndex < currentSegment.content.length) {
                            const char = currentSegment.content.charAt(charIndex);
                            const span = document.createElement('span');
                            span.className = `${currentSegment.color} font-rounded text-lightning-effect text-electric`;
                            span.textContent = char;
                            span.style.opacity = '0';
                            span.style.transform = 'translateY(3px)';
                            span.style.transition = 'all 0.15s ease-out';
                            typedElement.appendChild(span);

                            requestAnimationFrame(() => {
                                span.style.opacity = '1';
                                span.style.transform = 'translateY(0)';
                            });

                            charIndex++;
                            setTimeout(typeCharacter, getTypingDelay());
                        } else {
                            segmentIndex++;
                            charIndex = 0;
                            setTimeout(typeCharacter, getTypingDelay() + 30);
                        }
                    }
                } else {
                    // 显示完成后切换
                    setTimeout(() => {
                        typedElement.style.transition = 'opacity 0.4s ease-in-out, transform 0.4s ease-in-out';
                        typedElement.style.opacity = '0';
                        typedElement.style.transform = 'translateY(-8px)';

                        setTimeout(() => {
                            typedElement.innerHTML = '';
                            typedElement.style.opacity = '0.5';
                            typedElement.style.transform = 'translateY(0)';

                            isEnglishPhase = !isEnglishPhase;
                            segmentIndex = 0;
                            charIndex = 0;

                            setTimeout(typeCharacter, 400);
                        }, 400);
                    }, displayDuration);
                }
            }

            setTimeout(() => {
                typeCharacter();
            }, 600);
        });
        // 创建交互式提示框 - 支持中英文切换
        function showNavigationPrompt() {
            const language = isChinesePrompt ? 'zh' : 'en';
            console.log(`显示${language === 'zh' ? '中文' : '英文'}导航提示框`);

            const promptContainer = document.createElement('div');
            promptContainer.id = 'navigation-prompt';
            promptContainer.style.cssText = `
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                z-index: 9999;
                transform: translateY(100%);
                transition: transform 0.5s ease-out;
                background: rgba(5, 5, 5, 0.95);
                backdrop-filter: blur(15px);
                border-top: 2px solid rgba(255, 0, 0, 0.4);
                padding: 24px;
                box-shadow: 0 -8px 32px rgba(255, 0, 0, 0.1);
                animation: redGlow 3s ease-in-out infinite, borderPulse 2s ease-in-out infinite;
            `;

            // 中英文内容配置
            const content = {
                zh: {
                    title: "准备进入新世界？",
                    description: "点击确认将在新标签页中打开 <span style=\"color: rgba(255, 0, 0, 0.8); text-shadow: 0 0 8px rgba(255, 0, 0, 0.3);\">雾</span>行者 的博客",
                    cancelBtn: "取消",
                    confirmBtn: "确认打开"
                },
                en: {
                    title: "Ready to Enter New World?",
                    description: "Click confirm to open <span style=\"color: rgba(255, 0, 0, 0.8); text-shadow: 0 0 8px rgba(255, 0, 0, 0.3);\">FOG</span>WALKER's blog in a new tab",
                    cancelBtn: "Cancel",
                    confirmBtn: "Confirm"
                }
            };

            const currentContent = content[language];

            promptContainer.innerHTML = `
                <div style="max-width: 800px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 20px;">
                    <div style="text-align: left; flex: 1;">
                        <h3 style="
                            color: rgba(255, 255, 255, 0.9); 
                            font-size: 20px; 
                            margin: 0 0 10px 0; 
                            font-weight: bold;
                            text-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
                            font-family: 'Fredoka One', cursive;
                        ">${currentContent.title}</h3>
                        <p style="
                            color: rgba(255, 255, 255, 0.6); 
                            font-size: 14px; 
                            margin: 0;
                            text-shadow: 0 0 8px rgba(255, 255, 255, 0.1);
                        ">${currentContent.description}</p>
                    </div>
                    <div style="display: flex; gap: 16px; align-items: center;">
                        <button id="cancel-nav" style="
                            padding: 10px 20px;
                            border: 1px solid rgba(255, 255, 255, 0.2);
                            background: transparent;
                            color: rgba(255, 255, 255, 0.7);
                            cursor: pointer;
                            font-size: 14px;
                            transition: all 0.3s ease;
                            border-radius: 4px;
                            backdrop-filter: blur(5px);
                        " onmouseover="this.style.borderColor='rgba(255, 255, 255, 0.4)'; this.style.color='rgba(255, 255, 255, 0.9)'; this.style.background='rgba(255, 255, 255, 0.05)';" onmouseout="this.style.borderColor='rgba(255, 255, 255, 0.2)'; this.style.color='rgba(255, 255, 255, 0.7)'; this.style.background='transparent';">${currentContent.cancelBtn}</button>
                        <button id="confirm-nav" style="
                            padding: 10px 24px;
                            background: linear-gradient(135deg, rgba(255, 0, 0, 0.7) 0%, rgba(255, 50, 50, 0.8) 100%);
                            color: rgba(255, 255, 255, 0.95);
                            border: 1px solid rgba(255, 0, 0, 0.5);
                            cursor: pointer;
                            font-size: 14px;
                            font-weight: 600;
                            transition: all 0.3s ease;
                            border-radius: 4px;
                            text-shadow: 0 0 8px rgba(255, 0, 0, 0.4);
                            box-shadow: 0 0 15px rgba(255, 0, 0, 0.2);
                        " onmouseover="this.style.background='linear-gradient(135deg, rgba(255, 0, 0, 0.8) 0%, rgba(255, 30, 30, 0.9) 100%)'; this.style.boxShadow='0 0 20px rgba(255, 0, 0, 0.4)'; this.style.transform='translateY(-1px)';" onmouseout="this.style.background='linear-gradient(135deg, rgba(255, 0, 0, 0.7) 0%, rgba(255, 50, 50, 0.8) 100%)'; this.style.boxShadow='0 0 15px rgba(255, 0, 0, 0.2)'; this.style.transform='translateY(0)';">${currentContent.confirmBtn}</button>
                    </div>
                </div>
            `;

            document.body.appendChild(promptContainer);

            setTimeout(() => {
                promptContainer.style.transform = 'translateY(0)';
            }, 100);

            document.getElementById('confirm-nav').addEventListener('click', () => {
                console.log('用户点击确认');
                window.open('https://hi.imfog.com', '_blank');
                hideNavigationPrompt(true); // 停止轮询
            });

            document.getElementById('cancel-nav').addEventListener('click', () => {
                console.log('用户点击取消');
                hideNavigationPrompt(true); // 停止轮询
            });

            setTimeout(() => {
                if (document.getElementById('navigation-prompt')) {
                    console.log('自动隐藏提示框');
                    hideNavigationPrompt(false); // 自动关闭不停止轮询
                }
            }, 20000); // 改为20秒后自动关闭
        }

        function hideNavigationPrompt() {
            const promptContainer = document.getElementById('navigation-prompt');
            if (promptContainer) {
                console.log('隐藏提示框');
                promptContainer.style.transform = 'translateY(100%)';
                setTimeout(() => {
                    if (promptContainer.parentNode) {
                        promptContainer.parentNode.removeChild(promptContainer);
                    }
                }, 500);
            }
        }

        // 背景音乐控制
        let isPlaying = false;
        const backgroundMusic = document.getElementById('background-music');
        const musicControl = document.getElementById('music-control');
        const musicIcon = document.getElementById('music-icon');

        function toggleMusic() {
            if (isPlaying) {
                backgroundMusic.pause();
                musicIcon.className = 'fa fa-volume-off';
                musicControl.style.background = 'rgba(100, 100, 100, 0.15)';
                musicControl.style.borderColor = 'rgba(120, 120, 120, 0.3)';
                musicIcon.style.color = '#808080';
                isPlaying = false;
                console.log('音乐已暂停');
            } else {
                backgroundMusic.play().then(() => {
                    musicIcon.className = 'fa fa-volume-up';
                    musicControl.style.background = 'rgba(180, 180, 180, 0.2)';
                    musicControl.style.borderColor = 'rgba(200, 200, 200, 0.4)';
                    musicIcon.style.color = '#c0c0c0';
                    isPlaying = true;
                    console.log('音乐开始播放');
                }).catch(error => {
                    console.log('音乐播放失败:', error);
                    musicControl.style.background = 'rgba(160, 160, 160, 0.2)';
                    musicControl.style.borderColor = 'rgba(180, 180, 180, 0.4)';
                    musicIcon.style.color = '#a0a0a0';
                    musicIcon.className = 'fa fa-music';
                });
            }
        }

        musicControl.addEventListener('click', toggleMusic);

        const enterButton = document.getElementById('enter-button');
        let musicStarted = false;

        // 自动播放音乐的函数
        function startMusicAutomatically() {
            if (!musicStarted && !isPlaying) {
                console.log('检测到用户交互，自动开始播放音乐');
                backgroundMusic.play().then(() => {
                    musicIcon.className = 'fa fa-volume-up';
                    musicControl.style.background = 'rgba(180, 180, 180, 0.2)';
                    musicControl.style.borderColor = 'rgba(200, 200, 200, 0.4)';
                    musicIcon.style.color = '#c0c0c0';
                    isPlaying = true;
                    musicStarted = true;
                    console.log('音乐自动播放成功');
                    // 移除所有事件监听器
                    removeAllMusicListeners();
                }).catch(error => {
                    console.log('音乐播放失败:', error);
                });
            }
        }

        // 移除所有音乐相关的事件监听器
        function removeAllMusicListeners() {
            document.removeEventListener('click', startMusicAutomatically);
            document.removeEventListener('keydown', startMusicAutomatically);
            document.removeEventListener('touchstart', startMusicAutomatically);
            document.removeEventListener('mousemove', startMusicAutomatically);
            document.removeEventListener('mouseenter', startMusicAutomatically);
            document.removeEventListener('scroll', startMusicAutomatically);
            document.removeEventListener('touchmove', startMusicAutomatically);
            window.removeEventListener('focus', startMusicAutomatically);
        }

        // 添加多种交互事件监听，让音乐在任何用户交互时自动播放
        document.addEventListener('click', startMusicAutomatically);
        document.addEventListener('keydown', startMusicAutomatically);
        document.addEventListener('touchstart', startMusicAutomatically);
        document.addEventListener('mousemove', startMusicAutomatically);
        document.addEventListener('mouseenter', startMusicAutomatically);
        document.addEventListener('scroll', startMusicAutomatically);
        document.addEventListener('touchmove', startMusicAutomatically);
        window.addEventListener('focus', startMusicAutomatically);

        enterButton.addEventListener('click', () => {
            console.log('用户点击ENTER按钮');
            // ENTER按钮点击时也会触发音乐播放（通过上面的click事件）
        });

        // 尝试在页面加载时自动播放音乐
        window.addEventListener('load', () => {
            setTimeout(() => {
                if (!musicStarted && !isPlaying) {
                    console.log('尝试页面加载后自动播放音乐...');
                    backgroundMusic.play().then(() => {
                        console.log('页面加载后自动播放成功');
                        musicIcon.className = 'fa fa-volume-up';
                        musicControl.style.background = 'rgba(180, 180, 180, 0.2)';
                        musicControl.style.borderColor = 'rgba(200, 200, 200, 0.4)';
                        musicIcon.style.color = '#c0c0c0';
                        isPlaying = true;
                        musicStarted = true;
                        removeAllMusicListeners();
                    }).catch(error => {
                        console.log('页面加载后自动播放被浏览器阻止，等待用户交互:', error);
                    });
                }
            }, 500);
        });

        musicControl.addEventListener('mouseenter', () => {
            musicControl.style.transform = 'scale(1.1)';
            musicControl.style.boxShadow = '0 0 15px rgba(180, 180, 180, 0.3)';
        });

        musicControl.addEventListener('mouseleave', () => {
            musicControl.style.transform = 'scale(1)';
            musicControl.style.boxShadow = 'none';
        });

        // 优化的提示框轮询逻辑
        let isFirstPrompt = true;
        let promptCycleActive = true;
        let isChinesePrompt = true; // 控制中英文切换，首次为中文
        
        function startPromptCycle() {
            if (!promptCycleActive) return;
            
            if (isFirstPrompt) {
                // 首次进入页面10秒后显示
                console.log('页面加载完成，10秒后显示首次提示框');
                setTimeout(() => {
                    if (promptCycleActive) {
                        showNavigationPrompt();
                        isFirstPrompt = false;
                        // 首次提示框会在20秒后自动关闭，关闭后立即安排下一轮
                    }
                }, 10000);
            } else {
                // 第二次开始，直接显示提示框
                console.log('显示轮询提示框');
                if (promptCycleActive) {
                    showNavigationPrompt();
                    // 这个提示框也会在20秒后自动关闭，关闭后安排下一轮
                }
            }
        }
        
        // 修改hideNavigationPrompt，添加停止轮询的选项和语言切换
        const originalHideNavigationPrompt = hideNavigationPrompt;
        hideNavigationPrompt = function(stopCycle = false) {
            originalHideNavigationPrompt();
            if (stopCycle) {
                promptCycleActive = false;
                console.log('提示框轮询已停止');
            } else {
                // 切换语言
                isChinesePrompt = !isChinesePrompt;
                console.log(`提示框关闭，20秒后显示${isChinesePrompt ? '中文' : '英文'}提示框`);
                setTimeout(() => {
                    startPromptCycle();
                }, 20000);
            }
        };
        
        // 启动提示框循环
        startPromptCycle();
    </script>
</body>

</html>